## 场景

### 用户管理

#### 创建用户账号

账号信息：账号、手机、邮箱、真实姓名、分配的角色列表、分配的部门

+ [x] 用户信息检查
    - [x] 账号、手机、邮箱必须至少提供一个
    - [x] 提供的手机、邮箱格式必须正确
    - [x] 提供的账号、手机、邮箱必须未被使用
+ [x] 注册用户
    - [x] 未提供账号使用手机作为默认账号，未提供手机，则使用邮箱作为默认账号
    - [x] 未提供真实姓名使用手机作为真实姓名，未提供手机，则使用邮箱作为真实姓名
    - [x] 默认使用"123456"作为初始密码
    - [x] 用户默认启用状态
+ [x] 分配角色
    - [x] 确认分配的有效角色
+ [x] 分配部门
    - [x] 确认分配的是有效的部门

#### 分配角色

#### 分配部门

#### 启用/禁用用户账号

### 用户账户列表

+ [x] 搜索条件
    - [x] 账号、手机、邮箱，模糊查询
    - [x] 状态、性别
+ [x] 用户摘要信息：用户ID、账号、手机、邮箱、真实姓名、状态

### 个人账号管理

#### 修改账号信息

账号信息：用户Id、账号、手机、邮箱、真实姓名

#### 修改密码

+ [ ] 用户必须提供原始密码与新密码
+ [ ] 密码验证通过，使用新密码更新
+ [ ] *密码更新成功，当前用户失效，必须重新登录（redis中清除当前用户的token）*

#### 提交用户个人信息

用户个人信息：用户Id、头像、生日、性别

#### 个人用户信息详情

+ [ ] 用户信息
+ [ ] 所属角色
+ [ ] 所属部门

### 登录

#### 登录

+ [ ] 通过登录名（账号、手机、邮箱）获取用户
+ [ ] 验证密码
+ [ ] 通过用户信息构建 CartisanUser（UserDetails），提交SpringSecurity完成登录
+ [ ] 通过用户账号生成 JwtToken
+ [ ] JwtToken 保存到 redis，用以服务端可以决定用户的 token 是否有效

#### 用户 Token 验证

+ [ ] 从 Request Header 中获取 Authorization，去除前缀 Bearer，获取 Token
+ [ ] 验证 JwtToken 的有效性
+ [ ] 通过 Redis 验证 token 
+ [ ] 通过 token 的用户账号获取用户
+ [ ] 通过用户信息构建 CartisanUser（UserDetails），提交SpringSecurity完成登录

#### 退出

+ [ ] 从 Request Header 中获取 Authorization，去除前缀 Bearer，获取 Token
+ [ ] 从 Redis 中清除当前用户的 Token

#### 获取登录用户信息

返回当前登录用户的姓名、头像、角色、权限等




